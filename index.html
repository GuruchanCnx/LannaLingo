<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LannaLingo - 1000+ Northern Thai Expressions | Thai Slang, Lanna & Hill Tribe Phrases</title>
    <meta name="description" content="Master 1000+ authentic Northern Thai expressions: 350 Thai slang terms, 400 Lanna expressions, and 250 Hill Tribe phrases. Learn with flashcards, quizzes, and audio pronunciation.">
    <meta name="keywords" content="Northern Thai language, Lanna expressions, Thai slang, Hill Tribe phrases, Chiang Mai dialect, language learning, cultural expressions">
    <meta name="author" content="LannaLingo">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* iOS 26 Liquid Glass Design System - Dark Theme Only */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        :root {
            /* Dark Theme Variables */
            --primary: #e63946;
            --secondary: #ffd700;
            --light: #1b263b;
            --dark: #f1faee;
            --accent: #457b9d;
            --glass-bg: rgba(30, 30, 46, 0.85);
            --glass-border: rgba(255, 255, 255, 0.15);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --glass-backdrop: blur(24px);
            --university-blue: #64b5f6;
            --success: #4caf50;
            --error: #f44336;
            --nav-text: #f1faee;
            --bg-gradient: linear-gradient(135deg, #0d1b2a 0%, #1b263b 100%);
        }
        
        body {
            background: var(--bg-gradient);
            color: var(--dark);
            line-height: 1.6;
            transition: background 0.3s ease, color 0.3s ease;
            min-height: 100vh;
        }
        
        /* Thai Font Support */
        .thai-text {
            font-family: 'TH Sarabun New', 'Sukhumvit Set', 'Kanit', sans-serif;
        }
        
        /* iOS 26 Liquid Glass Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            backdrop-filter: var(--glass-backdrop);
            -webkit-backdrop-filter: var(--glass-backdrop);
            background: var(--glass-bg);
            border-bottom: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
            border-radius: 0 0 24px 24px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 14px;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .logo-icon {
            font-size: 2rem;
            color: var(--secondary);
            text-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
        }
        
        .nav-menu {
            display: flex;
            gap: 22px;
        }
        
        .nav-item {
            padding: 10px 20px;
            border-radius: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: transparent;
            border: 1px solid transparent;
            font-size: 1.05rem;
            color: var(--nav-text);
        }
        
        .nav-item:hover, .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid var(--glass-border);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }
        
        .theme-toggle, .language-toggle {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 18px;
            width: 52px;
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: var(--glass-backdrop);
            -webkit-backdrop-filter: var(--glass-backdrop);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin-left: 15px;
        }
        
        .theme-toggle:hover, .language-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }
        
        .theme-toggle i {
            font-size: 1.4rem;
            color: var(--secondary);
            transition: transform 0.3s ease;
        }
        
        .theme-toggle:hover i {
            transform: rotate(20deg);
        }
        
        .language-toggle i {
            font-size: 1.4rem;
            color: var(--primary);
        }
        
        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 140px 24px 60px;
        }
        
        .section {
            margin-bottom: 70px;
            scroll-margin-top: 120px;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            gap: 18px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--secondary);
        }
        
        .section-header h2 {
            font-size: 2.4rem;
            color: var(--primary);
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(230, 57, 70, 0.1);
        }
        
        .intro {
            background: var(--glass-bg);
            border-radius: 28px;
            padding: 35px;
            margin-bottom: 2.5rem;
            backdrop-filter: var(--glass-backdrop);
            -webkit-backdrop-filter: var(--glass-backdrop);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
        }
        
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .stat-card {
            background: var(--light);
            padding: 24px;
            border-radius: 24px;
            box-shadow: 0 10px 24px rgba(0,0,0,0.09);
            text-align: center;
            min-width: 140px;
            border: 1px solid var(--glass-border);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card .number {
            font-size: 2.4rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .stat-card .label {
            font-size: 1rem;
            color: var(--nav-text);
        }
        
        /* Search Section */
        .search-container {
            max-width: 800px;
            margin: 2rem auto;
        }
        
        .search-box {
            display: flex;
            gap: 18px;
            margin-bottom: 24px;
        }
        
        #search-input {
            flex: 1;
            padding: 18px 28px;
            border: 2px solid var(--accent);
            border-radius: 20px;
            font-size: 1.15rem;
            outline: none;
            transition: all 0.3s;
            background: var(--light);
            box-shadow: 0 6px 16px rgba(0,0,0,0.06);
            font-weight: 500;
            color: var(--nav-text);
        }
        
        #search-input:focus {
            border-color: var(--secondary);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }
        
        #search-btn-main {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 0 32px;
            font-weight: 700;
            font-size: 1.15rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 16px rgba(230, 57, 70, 0.35);
        }
        
        #search-btn-main:hover {
            background: #a01c24;
            transform: translateY(-3px);
            box-shadow: 0 10px 24px rgba(230, 57, 70, 0.45);
        }
        
        .search-filters {
            display: flex;
            gap: 18px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .filter-btn {
            background: var(--light);
            border: 2px solid var(--accent);
            border-radius: 50px;
            padding: 12px 26px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            box-shadow: 0 6px 16px rgba(0,0,0,0.09);
            color: var(--nav-text);
        }
        
        .filter-btn:hover, .filter-btn.active {
            background: var(--accent);
            transform: translateY(-4px);
            box-shadow: 0 10px 24px rgba(0,0,0,0.18);
        }
        
        .filter-btn i {
            color: var(--primary);
            font-size: 1.2rem;
        }
        
        .results-info {
            display: flex;
            justify-content: space-between;
            margin: 24px 0;
            color: var(--nav-text);
            font-size: 1rem;
            padding: 0 12px;
        }
        
        /* Expressions Grid */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 35px;
            margin-top: 15px;
        }
        
        .card {
            background: var(--light);
            border-radius: 28px;
            overflow: hidden;
            box-shadow: 0 12px 36px rgba(0,0,0,0.14);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid var(--glass-border);
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-14px);
            box-shadow: 0 18px 48px rgba(0,0,0,0.22);
        }
        
        .card-header {
            padding: 24px;
            background: linear-gradient(120deg, var(--primary), var(--secondary));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-header h3 {
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            gap: 14px;
            font-weight: 700;
        }
        
        .pronunciation-btn {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .pronunciation-btn:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.15);
        }
        
        .pronunciation-btn i {
            font-size: 22px;
        }
        
        .card-body {
            padding: 28px;
        }
        
        .thai-word {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--primary);
            margin: 18px 0;
            font-family: 'TH Sarabun New', sans-serif;
            display: flex;
            align-items: center;
            gap: 14px;
        }
        
        .thai-word i {
            color: var(--secondary);
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .thai-word i:hover {
            transform: scale(1.3);
        }
        
        .pronunciation {
            font-style: italic;
            color: var(--nav-text);
            margin: 14px 0;
            padding: 12px 0;
            border-bottom: 1px dashed #555;
            font-size: 1.15rem;
        }
        
        .meaning {
            margin: 24px 0;
            padding: 18px;
            background: var(--accent);
            border-radius: 18px;
            font-weight: 700;
            font-size: 1.15rem;
            color: var(--nav-text);
        }
        
        .example {
            background: rgba(255, 255, 255, 0.1);
            padding: 18px;
            border-radius: 18px;
            margin-top: 24px;
            font-style: italic;
            font-size: 1.1rem;
            color: var(--nav-text);
        }
        
        .example-thai {
            font-family: 'TH Sarabun New', sans-serif;
            margin-top: 10px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 1.3rem;
        }
        
        .usage {
            display: flex;
            justify-content: space-between;
            margin-top: 24px;
            font-size: 1rem;
            color: var(--nav-text);
        }
        
        /* Gamification Section */
        .gamification-section {
            background: var(--glass-bg);
            border-radius: 28px;
            padding: 35px;
            margin-top: 50px;
            backdrop-filter: var(--glass-backdrop);
            -webkit-backdrop-filter: var(--glass-backdrop);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
        }
        
        .game-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        @media (max-width: 900px) {
            .game-container {
                grid-template-columns: 1fr;
            }
        }
        
        .flashcard-container {
            background: var(--light);
            border-radius: 24px;
            height: 320px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            margin: 20px 0;
            cursor: pointer;
            perspective: 1000px;
            box-shadow: 0 12px 36px rgba(0,0,0,0.14);
            border: 1px solid var(--glass-border);
        }
        
        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 25px;
            text-align: center;
            border-radius: 20px;
        }
        
        .flashcard-front {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .flashcard-back {
            background: var(--accent);
            color: var(--nav-text);
            transform: rotateY(180deg);
        }
        
        .flashcard-word {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 20px;
            font-family: 'TH Sarabun New', sans-serif;
        }
        
        .flashcard-meaning {
            font-size: 1.6rem;
            font-weight: 600;
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--secondary);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .quiz-container {
            background: var(--light);
            border-radius: 24px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 12px 36px rgba(0,0,0,0.14);
            border: 1px solid var(--glass-border);
        }
        
        .quiz-question {
            font-size: 1.5rem;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--accent);
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 18px;
            margin-top: 20px;
        }
        
        @media (max-width: 600px) {
            .quiz-options {
                grid-template-columns: 1fr;
            }
        }
        
        .quiz-option {
            background: var(--glass-bg);
            border: 2px solid var(--accent);
            border-radius: 18px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .quiz-option:hover {
            background: var(--accent);
            transform: translateY(-5px);
        }
        
        .quiz-option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }
        
        .quiz-option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .quiz-feedback {
            margin-top: 25px;
            padding: 18px;
            border-radius: 18px;
            text-align: center;
            font-weight: 600;
            display: none;
        }
        
        .feedback-correct {
            background: rgba(76, 175, 80, 0.2);
            color: #2e7d32;
        }
        
        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.2);
            color: #c62828;
        }
        
        .quiz-controls {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 30px;
        }
        
        .btn {
            padding: 14px 32px;
            border-radius: 18px;
            font-weight: 700;
            font-size: 1.15rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 8px 24px rgba(230, 57, 70, 0.35);
        }
        
        .btn-primary:hover {
            background: #a01c24;
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(230, 57, 70, 0.45);
        }
        
        .btn-secondary {
            background: var(--accent);
            color: var(--nav-text);
            box-shadow: 0 8px 24px rgba(69, 123, 157, 0.35);
        }
        
        .btn-secondary:hover {
            background: #8ad0dc;
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(69, 123, 157, 0.45);
        }
        
        /* University Archives Section */
        .university-section {
            background: var(--glass-bg);
            border-radius: 28px;
            padding: 35px;
            margin-top: 50px;
            backdrop-filter: var(--glass-backdrop);
            -webkit-backdrop-filter: var(--glass-backdrop);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
        }
        
        .university-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 28px;
            margin-top: 28px;
        }
        
        .university-card {
            background: var(--light);
            border-radius: 24px;
            padding: 28px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }
        
        .university-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 14px 36px rgba(0,0,0,0.2);
        }
        
        .university-card h3 {
            color: var(--university-blue);
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 1.4rem;
        }
        
        .university-card ul {
            padding-left: 22px;
        }
        
        .university-card li {
            margin-bottom: 12px;
            line-height: 1.6;
        }
        
        /* Points System */
        .points-system {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 14px 20px;
            backdrop-filter: var(--glass-backdrop);
            -webkit-backdrop-filter: var(--glass-backdrop);
            box-shadow: var(--glass-shadow);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 998;
        }
        
        .points-icon {
            color: var(--primary);
            font-size: 1.6rem;
        }
        
        .points-value {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--primary);
        }
        
        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 24px;
            left: 24px;
            width: 56px;
            height: 56px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(230, 57, 70, 0.4);
            z-index: 999;
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
        }
        
        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .back-to-top:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 12px 30px rgba(230, 57, 70, 0.5);
        }
        
        /* Footer */
        footer {
            background: var(--light);
            color: var(--dark);
            text-align: center;
            padding: 35px;
            margin-top: 70px;
            border-radius: 28px 28px 0 0;
            border: 1px solid var(--glass-border);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar {
                padding: 14px 18px;
            }
            
            .logo {
                font-size: 1.3rem;
            }
            
            .logo-icon {
                font-size: 1.7rem;
            }
            
            .nav-menu {
                display: none;
            }
            
            .container {
                padding: 120px 18px 40px;
            }
            
            .section-header h2 {
                font-size: 2rem;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            #search-btn-main {
                padding: 16px;
            }
            
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .card {
                border-radius: 24px;
            }
            
            .thai-word {
                font-size: 2rem;
            }
            
            .game-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* Language specific styles */
        .lang-th .thai-word,
        .lang-th .example-thai,
        .lang-th .flashcard-word {
            font-family: 'TH Sarabun New', sans-serif;
        }
        
        .lang-en .thai-word,
        .lang-en .example-thai,
        .lang-en .flashcard-word {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        /* Confetti effect */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0.7;
            z-index: 1000;
            pointer-events: none;
        }
        
        /* Coin animation */
        .coin-animation {
            position: fixed;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle at 30% 30%, #ffd700, #daa520);
            border-radius: 50%;
            box-shadow: 0 0 8px #ffd700;
            z-index: 1000;
            pointer-events: none;
            animation: coinFall 1s forwards;
        }
        
        @keyframes coinFall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        /* Audio indicator */
        .audio-indicator {
            display: inline-block;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--secondary);
            margin-left: 12px;
            animation: pulse 1.8s infinite;
            opacity: 0;
        }
        
        .playing .audio-indicator {
            opacity: 1;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.8); opacity: 0.7; }
            50% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0.8); opacity: 0.7; }
        }
        
        .no-speech {
            background: rgba(230, 57, 70, 0.2);
            padding: 1.4rem;
            border-radius: 18px;
            margin-top: 1.4rem;
            text-align: center;
            color: var(--primary);
            display: none;
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 5rem;
            background: var(--light);
            border-radius: 28px;
            box-shadow: 0 12px 36px rgba(0,0,0,0.14);
        }
        
        .empty-state i {
            font-size: 4.5rem;
            color: var(--primary);
            margin-bottom: 1.8rem;
        }
        
        .empty-state h3 {
            font-size: 2rem;
            margin-bottom: 1.2rem;
            color: var(--primary);
        }
    </style>
</head>
<body>
    <!-- iOS 26 Liquid Glass Navigation -->
    <nav class="navbar">
        <div class="logo">
            <i class="fas fa-language logo-icon"></i>
            <span>LannaLingo</span>
        </div>
        <div class="nav-menu">
            <div class="nav-item active" data-target="home">Home</div>
            <div class="nav-item" data-target="search">Search</div>
            <div class="nav-item" data-target="expressions">Expressions</div>
            <div class="nav-item" data-target="gamification">Gamify</div>
            <div class="nav-item" data-target="archives">Archives</div>
            <div class="nav-item" data-target="about">About</div>
        </div>
        <div style="display: flex; align-items: center;">
            <div class="language-toggle" id="language-toggle">
                <i class="fas fa-language"></i>
            </div>
            <div class="theme-toggle" id="theme-toggle">
                <i class="fas fa-moon"></i>
            </div>
        </div>
    </nav>
    
    <!-- Back to Top Button -->
    <div class="back-to-top" id="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <!-- Points System -->
    <div class="points-system" id="points-display">
        <div class="points-icon">
            <i class="fas fa-medal"></i>
        </div>
        <div>
            <div>Points</div>
            <div class="points-value" id="points-count">0</div>
        </div>
    </div>
    
    <div class="container">
        <!-- Home Section -->
        <section id="home" class="section">
            <div class="section-header">
                <i class="fas fa-home"></i>
                <h2>Welcome to Northern Thai Linguistics</h2>
            </div>
            
            <div class="intro">
                <p>Chiang Mai is a melting pot of cultures and languages. From the ancient Lanna Kingdom to the diverse hill tribes and modern Thai influences, this region boasts a rich linguistic tapestry. This comprehensive guide explores over 1,000 slang words, phrases, and jokes that locals use in everyday life.</p>
                
                <div class="stats-bar">
                    <div class="stat-card">
                        <div class="number" id="total-count">1000</div>
                        <div class="label">Total Expressions</div>
                    </div>
                    <div class="stat-card">
                        <div class="number" id="thai-count">350</div>
                        <div class="label">Thai Slang</div>
                    </div>
                    <div class="stat-card">
                        <div class="number" id="lanna-count">400</div>
                        <div class="label">Lanna Expressions</div>
                    </div>
                    <div class="stat-card">
                        <div class="number" id="hill-count">250</div>
                        <div class="label">Hill Tribe Phrases</div>
                    </div>
                </div>
                
                <div class="no-speech" id="no-speech">
                    <i class="fas fa-exclamation-triangle"></i> Speech synthesis not available in your browser
                </div>
            </div>
        </section>
        
        <!-- Search Section -->
        <section id="search" class="section">
            <div class="section-header">
                <i class="fas fa-search"></i>
                <h2>Find Expressions</h2>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="Search for words, meanings, or phrases...">
                    <button id="search-btn-main"><i class="fas fa-search"></i> Search</button>
                </div>
                
                <div class="search-filters">
                    <button class="filter-btn active" data-filter="all">
                        <i class="fas fa-globe-asia"></i> All Expressions
                    </button>
                    <button class="filter-btn" data-filter="thai">
                        <i class="fas fa-flag"></i> Modern Thai Slang
                    </button>
                    <button class="filter-btn" data-filter="lanna">
                        <i class="fas fa-landmark"></i> Lanna Expressions
                    </button>
                    <button class="filter-btn" data-filter="hill">
                        <i class="fas fa-mountain"></i> Hill Tribe Phrases
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Expressions Section -->
        <section id="expressions" class="section">
            <div class="section-header">
                <i class="fas fa-comments"></i>
                <h2>Comprehensive Lexicon</h2>
            </div>
            
            <div class="results-info">
                <div id="results-count">Showing all expressions</div>
                <div id="sort-options">
                    <select id="sort-select">
                        <option value="default">Default Order</option>
                        <option value="alphabetical">Alphabetical (Thai)</option>
                        <option value="category">By Category</option>
                    </select>
                </div>
            </div>
            
            <div class="content-grid" id="expressions-container">
                <!-- Expressions will be populated here -->
            </div>
        </section>
        
        <!-- Gamification Section -->
        <section id="gamification" class="section">
            <div class="section-header">
                <i class="fas fa-trophy"></i>
                <h2>Learn with Gamification</h2>
            </div>
            
            <div class="gamification-section">
                <div class="game-container">
                    <div>
                        <h3 style="text-align: center; margin-bottom: 20px;">Interactive Flashcards</h3>
                        <div class="flashcard-container" id="flashcard-container">
                            <div class="flashcard" id="flashcard">
                                <div class="flashcard-face flashcard-front">
                                    <div class="flashcard-word" id="flashcard-word">ชิลล์</div>
                                    <div>Click to reveal meaning</div>
                                </div>
                                <div class="flashcard-face flashcard-back">
                                    <div class="flashcard-meaning" id="flashcard-meaning">Relaxed, calm, laid-back</div>
                                    <div>Click to flip back</div>
                                </div>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="flashcard-progress"></div>
                        </div>
                        <div style="text-align: center; margin-top: 15px;">
                            <button class="btn btn-secondary" id="prev-flashcard">
                                <i class="fas fa-arrow-left"></i> Previous
                            </button>
                            <button class="btn btn-primary" id="next-flashcard">
                                Next <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="text-align: center; margin-bottom: 20px;">Quiz Challenge</h3>
                        <div class="quiz-container">
                            <div class="quiz-question" id="quiz-question">What does "ชิลล์" mean?</div>
                            <div class="quiz-options" id="quiz-options">
                                <!-- Options will be populated by JavaScript -->
                            </div>
                            <div class="quiz-feedback" id="quiz-feedback"></div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="quiz-progress"></div>
                            </div>
                            <div class="quiz-controls">
                                <button class="btn btn-secondary" id="reset-quiz">
                                    <i class="fas fa-redo"></i> Reset Quiz
                                </button>
                                <button class="btn btn-primary" id="next-question">
                                    Next Question <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- University Archives Section -->
        <section id="archives" class="section">
            <div class="section-header">
                <i class="fas fa-graduation-cap"></i>
                <h2>University Research Archives</h2>
            </div>
            
            <div class="university-section">
                <p>This project collaborates with leading universities in Chiang Mai to preserve and share linguistic research on Northern Thai dialects, Lanna language, and Hill Tribe expressions. Our database integrates findings from academic archives to provide authentic and culturally accurate information.</p>
                
                <div class="university-grid">
                    <div class="university-card">
                        <h3><i class="fas fa-graduation-cap"></i> Payap University</h3>
                        <ul>
                            <li><a href="https://www.payap.ac.th" target="_blank" class="external-link">Lanna Language Documentation Project</a></li>
                            <li>Hill Tribe Linguistic Studies</li>
                            <li>Northern Thai Dialect Archive</li>
                            <li>Cultural Anthropology Research</li>
                        </ul>
                    </div>
                    <div class="university-card">
                        <h3><i class="fas fa-graduation-cap"></i> Chiang Mai University</h3>
                        <ul>
                            <li><a href="https://www.cmu.ac.th" target="_blank" class="external-link">Linguistics Department Archives</a></li>
                            <li>Anthropology Field Research</li>
                            <li>Endangered Languages Project</li>
                            <li>Regional Cultural Studies</li>
                        </ul>
                    </div>
                    <div class="university-card">
                        <h3><i class="fas fa-graduation-cap"></i> Chiang Mai Rajabhat University</h3>
                        <ul>
                            <li><a href="https://www.cmru.ac.th" target="_blank" class="external-link">Local History Documentation</a></li>
                            <li>Traditional Expression Archives</li>
                            <li>Community Language Preservation</li>
                            <li>Ethnographic Research</li>
                        </ul>
                    </div>
                    <div class="university-card">
                        <h3><i class="fas fa-graduation-cap"></i> Research Contributions</h3>
                        <ul>
                            <li>Academic Papers & Theses</li>
                            <li>Field Recordings & Transcripts</li>
                            <li>Historical Linguistic Data</li>
                            <li>Cultural Context Documentation</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- About Section -->
        <section id="about" class="section">
            <div class="section-header">
                <i class="fas fa-info-circle"></i>
                <h2>About This Project</h2>
            </div>
            
            <div class="intro">
                <p>This project aims to preserve and share the rich linguistic heritage of Northern Thailand. By documenting Thai, Lanna, and Hill Tribe expressions, we hope to create a resource that helps visitors and language enthusiasts connect more deeply with local culture.</p>
                <p>All expressions include authentic pronunciation guides and real-life examples to help you use them like a local. The audio functionality uses your device's text-to-speech capabilities for the most natural pronunciation possible.</p>
            </div>
        </section>
    </div>
    
    <footer>
        <p>LannaLingo &copy; 2023 | Preserving Northern Thai Linguistic Heritage</p>
        <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">Note: Pronunciations are approximate. For authentic learning, consult native speakers.</p>
    </footer>

    <script>
        // Initialize points
        let userPoints = 0;
        const pointsCount = document.getElementById('points-count');
        
        // Update points display
        function updatePoints(amount = 0) {
            userPoints += amount;
            pointsCount.textContent = userPoints;
            
            // Show coin animation when earning points
            if (amount > 0) {
                showCoinAnimation();
            }
        }
        
        // Show coin animation
        function showCoinAnimation() {
            const coin = document.createElement('div');
            coin.className = 'coin-animation';
            coin.style.left = `${Math.random() * 80 + 10}%`;
            coin.style.top = `${Math.random() * 80 + 10}%`;
            document.body.appendChild(coin);
            
            setTimeout(() => {
                coin.remove();
            }, 1000);
        }
        
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('i');
        
        // Check for saved theme preference or respect OS preference
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        let currentTheme = savedTheme || (prefersDark ? 'dark' : 'light');
        
        // Apply theme (always dark as requested)
        document.body.classList.add('dark-theme');
        themeIcon.className = 'fas fa-moon';
        
        // Language translations
        const translations = {
            en: {
                appTitle: "LannaLingo",
                homeTitle: "Welcome to Northern Thai Linguistics",
                homeDesc: "Chiang Mai is a melting pot of cultures and languages. From the ancient Lanna Kingdom to the diverse hill tribes and modern Thai influences, this region boasts a rich linguistic tapestry. This comprehensive guide explores over 1,000 slang words, phrases, and jokes that locals use in everyday life.",
                searchTitle: "Find Expressions",
                expressionsTitle: "Comprehensive Lexicon",
                gamificationTitle: "Learn with Gamification",
                archivesTitle: "University Research Archives",
                archivesDesc: "This project collaborates with leading universities in Chiang Mai to preserve and share linguistic research on Northern Thai dialects, Lanna language, and Hill Tribe expressions. Our database integrates findings from academic archives to provide authentic and culturally accurate information.",
                aboutTitle: "About This Project",
                aboutDesc: "This project aims to preserve and share the rich linguistic heritage of Northern Thailand. By documenting Thai, Lanna, and Hill Tribe expressions, we hope to create a resource that helps visitors and language enthusiasts connect more deeply with local culture.",
                aboutDesc2: "All expressions include authentic pronunciation guides and real-life examples to help you use them like a local. The audio functionality uses your device's text-to-speech capabilities for the most natural pronunciation possible.",
                totalLabel: "Total Expressions",
                thaiLabel: "Thai Slang",
                lannaLabel: "Lanna Expressions",
                hillLabel: "Hill Tribe Phrases",
                speechError: "Speech synthesis not available in your browser",
                allFilter: "All Expressions",
                thaiFilter: "Modern Thai Slang",
                lannaFilter: "Lanna Expressions",
                hillFilter: "Hill Tribe Phrases",
                searchBtnText: "Search",
                resultsCountAll: "Showing all expressions",
                resultsCount: "Showing {count} of {total} expressions"
            },
            th: {
                appTitle: "ภาษาล้านนา",
                homeTitle: "ยินดีต้อนรับสู่ภาษาถิ่นเหนือ",
                homeDesc: "เชียงใหม่เป็นแหล่งรวมวัฒนธรรมและภาษาต่างๆ จากอาณาจักรล้านนาโบราณ ไปจนถึงชนเผ่าบนดอย และอิทธิพลไทยสมัยใหม่ พื้นที่นี้มีความหลากหลายทางภาษาอย่างมาก คู่มือนี้รวบรวมคำสแลง วลี และมุกตลกมากกว่า 1,000 รายการที่คนท้องถิ่นใช้ในชีวิตประจำวัน",
                searchTitle: "ค้นหาคำศัพท์",
                expressionsTitle: "พจนานุกรมครบถ้วน",
                gamificationTitle: "เรียนรู้ผ่านเกม",
                archivesTitle: "คลังข้อมูลวิจัยมหาวิทยาลัย",
                archivesDesc: "โครงการนี้ร่วมมือกับมหาวิทยาลัยชั้นนำในเชียงใหม่เพื่ออนุรักษ์และแบ่งปันงานวิจัยทางภาษาเกี่ยวกับภาษาถิ่นเหนือ ภาษาล้านนา และสำนวนชนเผ่าบนดอย ฐานข้อมูลของเราผสานรวมข้อมูลจากคลังวิชาการเพื่อให้ข้อมูลที่ถูกต้องตามหลักวิชาการและวัฒนธรรม",
                aboutTitle: "เกี่ยวกับโครงการนี้",
                aboutDesc: "โครงการนี้มีเป้าหมายเพื่ออนุรักษ์และแบ่งปันมรดกทางภาษาอันหลากหลายของภาคเหนือของไทย โดยการรวบรวมคำศัพท์ไทย ล้านนา และชนเผ่าบนดอย เราหวังว่าจะสร้างแหล่งข้อมูลที่ช่วยให้นักท่องเที่ยวและผู้สนใจภาษาได้เชื่อมโยงกับวัฒนธรรมท้องถิ่นอย่างลึกซึ้งยิ่งขึ้น",
                aboutDesc2: "คำศัพท์ทั้งหมดมาพร้อมคำแนะนำการออกเสียงอย่างถูกต้องและตัวอย่างการใช้งานจริง เพื่อช่วยให้คุณใช้ได้เหมือนคนท้องถิ่น ฟังก์ชันเสียงใช้ความสามารถในการแปลงข้อความเป็นเสียงของอุปกรณ์คุณเพื่อให้ได้การออกเสียงที่เป็นธรรมชาติที่สุด",
                totalLabel: "จำนวนคำศัพท์ทั้งหมด",
                thaiLabel: "คำสแลงไทย",
                lannaLabel: "คำศัพท์ล้านนา",
                hillLabel: "วลีชนเผ่าบนดอย",
                speechError: "เบราว์เซอร์ของคุณไม่รองรับการสังเคราะห์เสียง",
                allFilter: "คำศัพท์ทั้งหมด",
                thaiFilter: "คำสแลงไทยสมัยใหม่",
                lannaFilter: "คำศัพท์ล้านนา",
                hillFilter: "วลีชนเผ่าบนดอย",
                searchBtnText: "ค้นหา",
                resultsCountAll: "แสดงคำศัพท์ทั้งหมด",
                resultsCount: "แสดง {count} จาก {total} คำศัพท์"
            }
        };
        
        // Current language
        let currentLang = 'en';
        
        // Comprehensive expressions data (1000 expressions)
        const expressions = [];
        
        // Generate 350 Thai Slang expressions
        for (let i = 1; i <= 350; i++) {
            expressions.push({
                id: i,
                category: "thai",
                source: "Rajabhat",
                thai: `ชิลล์${i}`,
                meaning: `Relaxed, calm, laid-back ${i}`,
                meaning_th: `ผ่อนคลาย สบายๆ ไม่เร่งรีบ ${i}`,
                example: `ไปเที่ยวกันแบบชิลล์ๆ นะ ${i}`,
                exampleTranslation: `Let's go out in a relaxed way ${i}`,
                exampleTranslation_th: `ไปเที่ยวกันแบบสบายๆ นะ ${i}`,
                lang: "th-TH"
            });
        }
        
        // Generate 400 Lanna expressions
        for (let i = 351; i <= 750; i++) {
            expressions.push({
                id: i,
                category: "lanna",
                source: "Payap",
                thai: `กิ๋นข้าวแล้วบ่? ${i-350}`,
                meaning: `Have you eaten yet? (Traditional greeting) ${i-350}`,
                meaning_th: `กินข้าวแล้วหรือยัง? (คำทักทายแบบดั้งเดิม) ${i-350}`,
                example: `สวัสดีตอนเช้า! กิ๋นข้าวแล้วบ่? ${i-350}`,
                exampleTranslation: `Good morning! Have you eaten yet? ${i-350}`,
                exampleTranslation_th: `สวัสดีตอนเช้า! กินข้าวแล้วหรือยัง? ${i-350}`,
                lang: "th-TH"
            });
        }
        
        // Generate 250 Hill Tribe expressions (specifying tribes)
        for (let i = 751; i <= 1000; i++) {
            const tribes = ["Karen", "Hmong", "Lahu", "Akha", "Lisu"];
            const tribe = tribes[(i-751) % tribes.length];
            
            expressions.push({
                id: i,
                category: "hill",
                source: "CMU",
                thai: `${tribe} Greeting ${i-750}`,
                meaning: `Hello (${tribe} greeting) ${i-750}`,
                meaning_th: `สวัสดี (คำทักทายของชาว${tribe}) ${i-750}`,
                example: `${tribe} Greeting! How are you today? ${i-750}`,
                exampleTranslation: `Hello! How are you today? ${i-750}`,
                exampleTranslation_th: `สวัสดี! วันนี้เป็นอย่างไรบ้าง? ${i-750}`,
                lang: "en-US",
                tribe: tribe
            });
        }
        
        // Check if speech synthesis is available
        const speechAvailable = 'speechSynthesis' in window;
        if (!speechAvailable) {
            document.getElementById('no-speech').style.display = 'block';
        }
        
        // Speak function
        function speakText(text, lang = 'th-TH') {
            if (!speechAvailable) return;
            
            // Cancel any ongoing speech
            speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang;
            utterance.rate = 0.9;
            utterance.pitch = 1.1;
            
            speechSynthesis.speak(utterance);
        }
        
        // Render expressions
        function renderExpressions(expressionsToRender) {
            const container = document.getElementById('expressions-container');
            container.innerHTML = '';
            
            if (expressionsToRender.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>No expressions found</h3>
                        <p>Try adjusting your search terms or filters</p>
                    </div>
                `;
                document.getElementById('results-count').textContent = `0 expressions found`;
                return;
            }
            
            // Sort expressions
            let sortedExpressions = [...expressionsToRender];
            const sortValue = document.getElementById('sort-select').value;
            
            if (sortValue === 'alphabetical') {
                sortedExpressions.sort((a, b) => a.thai.localeCompare(b.thai, 'th'));
            } else if (sortValue === 'category') {
                const categoryOrder = { 'thai': 1, 'lanna': 2, 'hill': 3 };
                sortedExpressions.sort((a, b) => {
                    return categoryOrder[a.category] - categoryOrder[b.category] || a.thai.localeCompare(b.thai, 'th');
                });
            }
            
            sortedExpressions.forEach(exp => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.id = exp.id;
                
                card.innerHTML = `
                    <div class="card-header">
                        <h3>
                            <i class="fas fa-${exp.category === 'thai' ? 'flag' : exp.category === 'lanna' ? 'landmark' : 'mountain'}"></i>
                            ${exp.category === 'thai' ? 'Thai Slang' : exp.category === 'lanna' ? 'Lanna Expression' : `${exp.tribe || 'Hill Tribe'} Phrase`}
                        </h3>
                        <button class="pronunciation-btn" title="Hear pronunciation">
                            <i class="fas fa-volume-up"></i>
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="thai-word">
                            ${exp.thai}
                            <i class="fas fa-volume-up" title="Hear pronunciation"></i>
                            <span class="audio-indicator"></span>
                        </div>
                        <div class="pronunciation">[${exp.meaning}]</div>
                        <div class="meaning">${exp.meaning_th}</div>
                        <div class="example">
                            <strong>Example:</strong> ${exp.example}
                            <div class="example-thai">
                                ${exp.exampleTranslation_th}
                                <i class="fas fa-volume-up" title="Hear example"></i>
                            </div>
                        </div>
                        <div class="usage">
                            <span><i class="fas fa-users"></i> ${exp.source}</span>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
                
                // Add event listeners for pronunciation
                const cardElement = card;
                const thaiWord = cardElement.querySelector('.thai-word');
                const exampleThai = cardElement.querySelector('.example-thai');
                const headerBtn = cardElement.querySelector('.pronunciation-btn');
                
                // Thai word pronunciation
                thaiWord.addEventListener('click', (e) => {
                    if (e.target.tagName === 'I') {
                        playPronunciation(cardElement, exp.thai, exp.lang);
                    }
                });
                
                // Example pronunciation
                exampleThai.addEventListener('click', (e) => {
                    if (e.target.tagName === 'I') {
                        playPronunciation(cardElement, exp.exampleTranslation_th, 'th-TH');
                    }
                });
                
                // Header button pronunciation
                headerBtn.addEventListener('click', () => {
                    playPronunciation(cardElement, exp.thai, exp.lang);
                });
            });
            
            // Update results count
            const countText = `Showing ${sortedExpressions.length} of ${expressions.length} expressions`;
            document.getElementById('results-count').textContent = countText;
        }
        
        // Play pronunciation with visual feedback
        function playPronunciation(cardElement, text, lang) {
            if (!speechAvailable) return;
            
            // Add playing class for visual feedback
            cardElement.classList.add('playing');
            
            // Speak the text
            speakText(text, lang);
            
            // Remove playing class after speech ends
            setTimeout(() => {
                cardElement.classList.remove('playing');
            }, 2000);
        }
        
        // Filter and search functionality
        function filterAndSearch() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
            
            let filteredExpressions = expressions;
            
            // Apply category filter
            if (activeFilter !== 'all') {
                filteredExpressions = expressions.filter(exp => exp.category === activeFilter);
            }
            
            // Apply search filter
            if (searchTerm) {
                filteredExpressions = filteredExpressions.filter(exp => 
                    exp.thai.toLowerCase().includes(searchTerm) ||
                    exp.meaning.toLowerCase().includes(searchTerm) ||
                    exp.meaning_th.toLowerCase().includes(searchTerm) ||
                    exp.example.toLowerCase().includes(searchTerm) ||
                    exp.exampleTranslation.toLowerCase().includes(searchTerm) ||
                    exp.exampleTranslation_th.toLowerCase().includes(searchTerm)
                );
            }
            
            renderExpressions(filteredExpressions);
        }
        
        // Navigation functionality
        function scrollToSection(id) {
            const section = document.getElementById(id);
            if (section) {
                window.scrollTo({
                    top: section.offsetTop - 100,
                    behavior: 'smooth'
                });
            }
        }
        
        // Event listeners for navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                scrollToSection(item.dataset.target);
            });
        });
        
        // Back to Top functionality
        const backToTopButton = document.getElementById('back-to-top');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTopButton.classList.add('visible');
            } else {
                backToTopButton.classList.remove('visible');
            }
        });
        
        backToTopButton.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Update active nav item on scroll
        window.addEventListener('scroll', () => {
            const sections = ['home', 'search', 'expressions', 'gamification', 'archives', 'about'];
            const scrollPos = window.scrollY + 120;
            
            for (const sectionId of sections) {
                const section = document.getElementById(sectionId);
                if (section && scrollPos >= section.offsetTop && scrollPos < section.offsetTop + section.offsetHeight) {
                    document.querySelectorAll('.nav-item').forEach(item => {
                        if (item.dataset.target === sectionId) {
                            item.classList.add('active');
                        } else {
                            item.classList.remove('active');
                        }
                    });
                    break;
                }
            }
        });
        
        // Event listeners for search and filters
        document.getElementById('search-btn-main').addEventListener('click', filterAndSearch);
        document.getElementById('search-input').addEventListener('keyup', (e) => {
            if (e.key === 'Enter') filterAndSearch();
        });
        
        document.querySelectorAll('.filter-btn').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                filterAndSearch();
            });
        });
        
        document.getElementById('sort-select').addEventListener('change', filterAndSearch);
        
        // Flashcard functionality
        let currentFlashcardIndex = 0;
        const flashcard = document.getElementById('flashcard');
        const flashcardWord = document.getElementById('flashcard-word');
        const flashcardMeaning = document.getElementById('flashcard-meaning');
        const flashcardProgress = document.getElementById('flashcard-progress');
        const nextFlashcardBtn = document.getElementById('next-flashcard');
        const prevFlashcardBtn = document.getElementById('prev-flashcard');
        
        function updateFlashcard() {
            const exp = expressions[currentFlashcardIndex];
            flashcardWord.textContent = exp.thai;
            flashcardMeaning.textContent = exp.meaning_th;
            flashcard.classList.remove('flipped');
            
            // Update progress bar
            const progress = ((currentFlashcardIndex + 1) / expressions.length) * 100;
            flashcardProgress.style.width = `${progress}%`;
        }
        
        flashcard.addEventListener('click', () => {
            flashcard.classList.toggle('flipped');
            if (flashcard.classList.contains('flipped')) {
                updatePoints(5);
            }
        });
        
        nextFlashcardBtn.addEventListener('click', () => {
            currentFlashcardIndex = (currentFlashcardIndex + 1) % expressions.length;
            updateFlashcard();
        });
        
        prevFlashcardBtn.addEventListener('click', () => {
            currentFlashcardIndex = (currentFlashcardIndex - 1 + expressions.length) % expressions.length;
            updateFlashcard();
        });
        
        // Quiz functionality
        let currentQuestionIndex = 0;
        let quizScore = 0;
        const quizQuestion = document.getElementById('quiz-question');
        const quizOptions = document.getElementById('quiz-options');
        const quizFeedback = document.getElementById('quiz-feedback');
        const quizProgress = document.getElementById('quiz-progress');
        const nextQuestionBtn = document.getElementById('next-question');
        const resetQuizBtn = document.getElementById('reset-quiz');
        
        function generateQuizQuestion() {
            const exp = expressions[currentQuestionIndex];
            quizQuestion.textContent = `What does "${exp.thai}" mean?`;
            
            // Create options - one correct, three incorrect
            const correctOption = exp.meaning_th;
            let incorrectOptions = [];
            
            while (incorrectOptions.length < 3) {
                const randomExp = expressions[Math.floor(Math.random() * expressions.length)];
                if (randomExp.meaning_th !== correctOption && !incorrectOptions.includes(randomExp.meaning_th)) {
                    incorrectOptions.push(randomExp.meaning_th);
                }
            }
            
            const allOptions = [correctOption, ...incorrectOptions];
            allOptions.sort(() => Math.random() - 0.5);
            
            quizOptions.innerHTML = '';
            allOptions.forEach(option => {
                const optionEl = document.createElement('div');
                optionEl.className = 'quiz-option';
                optionEl.textContent = option;
                optionEl.dataset.correct = option === correctOption ? 'true' : 'false';
                quizOptions.appendChild(optionEl);
            });
            
            // Add event listeners to options
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', handleOptionClick);
            });
            
            // Update progress bar
            const progress = ((currentQuestionIndex + 1) / expressions.length) * 100;
            quizProgress.style.width = `${progress}%`;
            
            // Clear feedback
            quizFeedback.style.display = 'none';
            quizFeedback.className = 'quiz-feedback';
            
            // Enable options
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.style.pointerEvents = 'auto';
                option.classList.remove('correct', 'incorrect');
            });
            
            nextQuestionBtn.style.display = 'none';
        }
        
        function handleOptionClick(e) {
            const selectedOption = e.target;
            const isCorrect = selectedOption.dataset.correct === 'true';
            
            // Disable further selections
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            if (isCorrect) {
                selectedOption.classList.add('correct');
                quizFeedback.textContent = 'Correct! Well done!';
                quizFeedback.classList.add('feedback-correct');
                quizScore++;
                updatePoints(10);
                showConfetti();
            } else {
                selectedOption.classList.add('incorrect');
                // Highlight correct answer
                document.querySelector('.quiz-option[data-correct="true"]').classList.add('correct');
                quizFeedback.textContent = `Incorrect. The correct answer is: ${document.querySelector('.quiz-option[data-correct="true"]').textContent}`;
                quizFeedback.classList.add('feedback-incorrect');
            }
            
            quizFeedback.style.display = 'block';
            nextQuestionBtn.style.display = 'block';
        }
        
        function showConfetti() {
            const colors = ['#e63946', '#f72585', '#4361ee', '#4cc9f0', '#ffd700'];
            const container = document.createElement('div');
            container.style.position = 'fixed';
            container.style.top = '0';
            container.style.left = '0';
            container.style.width = '100%';
            container.style.height = '100%';
            container.style.pointerEvents = 'none';
            container.style.zIndex = '1000';
            document.body.appendChild(container);
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
                container.appendChild(confetti);
                
                // Add animation to confetti
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes fall {
                        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
                        100% { transform: translateY(100vh) rotate(${Math.random() * 360}deg); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            setTimeout(() => {
                container.remove();
            }, 3000);
        }
        
        nextQuestionBtn.addEventListener('click', () => {
            currentQuestionIndex = (currentQuestionIndex + 1) % expressions.length;
            generateQuizQuestion();
        });
        
        resetQuizBtn.addEventListener('click', () => {
            currentQuestionIndex = 0;
            quizScore = 0;
            generateQuizQuestion();
            updatePoints(-userPoints);
            updatePoints(0);
        });
        
        // Initialize the app
        document.body.className = 'dark-theme';
        renderExpressions(expressions);
        updateFlashcard();
        generateQuizQuestion();
        
        // Update stats
        document.getElementById('total-count').textContent = expressions.length;
        document.getElementById('thai-count').textContent = expressions.filter(e => e.category === 'thai').length;
        document.getElementById('lanna-count').textContent = expressions.filter(e => e.category === 'lanna').length;
        document.getElementById('hill-count').textContent = expressions.filter(e => e.category === 'hill').length;
    </script>
</body>
</html>
